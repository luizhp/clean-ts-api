
npm init -y
-y => configuraÃ§Ãµes default

1) PadronizaÃ§Ã£o de commits:

https://www.conventionalcommits.org
A especificaÃ§Ã£o do Conventional Commits Ã© uma convenÃ§Ã£o simples para utilizar nas mensagens de commit.
Ela define um conjunto de regras para criar um histÃ³rico de commit explÃ­cito, o que facilita a criaÃ§Ã£o de ferramentas automatizadas.

https://github.com/angular/angular/blob/master/CONTRIBUTING.md#-commit-message-guidelines
We have very precise rules over how our git commit messages can be formatted.
This leads to more readable messages that are easy to follow when looking through the project history.
But also, we use the git commit messages to generate the Angular change log.

Biblioteca para forÃ§ar que a convenÃ§Ã£o do texto no commit seja seguido:
   https://www.npmjs.com/package/git-commit-msg-linter
   A git "commit-msg" hook for linting your git commit message against the Angular Commit Message Guidelines.
   As a hook it will run at every commiting to make sure that the message to commit is valid against the conventions. 

   Inserir biblioteca:
      npm i -D git-commit-msg-linter

2) typescript @types/node

   Inserir biblioteca:
      npm i -D typescript @types/node

3) criar tsconfig.json

   criar automaticamente com tsc --init
   "outDir": "./dist"
   "module": "commonjs"
   "target": "es2020"
   "esModuleInterop": true
   "allowJs": true

   Suporte do node para recursos de cada versÃ£o do ECMASCRIPT (vide target)
   https://node.green/

4) linter

   ApresentaÃ§Ã£o da pÃ¡gina - DefiniÃ§Ã£o de padrÃµes JS
   https://standardjs.com/

   https://github.com/standard/eslint-config-standard-with-typescript
   https://www.npmjs.com/package/eslint-config-standard-with-typescript

   Instalar plugins typescript+eslint+standard:
   npm install --save-dev eslint@6 eslint-plugin-standard@4 eslint-plugin-promise@4 eslint-plugin-import@2 eslint-plugin-node@11 @typescript-eslint/eslint-plugin@2 eslint-config-standard-with-typescript

   habilitar no VSCODE: VS Code ESLint extension
   https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint
   (plugin do standardjs serve para projetos somente em js - caso tenha plugin standardjs desabilitar e deixar somente o eslint)

   criar o arquivo .eslintrc.json na pasta raiz e adicionar:
   {
       "extends": "standard-with-typescript",
       "parserOptions": {
           "project": "./tsconfig.json"
       }
   }

   Para testar se estÃ¡ ativo a checagem do eslint,
   foi criado um arquivo temporÃ¡rio
   test.ts com o seguinte conteÃºdo:
   
   function teste() {
       return 1;
   }

   e depois de alguns ajustes acabou se tornando:
   
   function teste (): number {
     return 1
   }

   teste()

   provando assim que a checagem estava ativa

   . Criado o arquivo .eslintignore com as pastas para que o eslint ignore
     docs
     node_modules
     dist

-------------------------------------------------
-- ValidaÃ§Ã£o de modificaÃ§Ãµes antes de commit/push
   lint-staged + husky

5) lint-staged
   Run linters against staged git files and don't let ðŸ’© slip into your code base!
   https://www.npmjs.com/package/lint-staged

   Roda junto com o husky para acelerar o processo de validaÃ§Ã£o.
   Permite que rode scripts somente para arquivos que estÃ£o na Ã¡rea de stage do git
   (somente os que foram modificados e passaram pelo git add)
   Para nÃ£o ter que rodar em todos os arquivos do projeto. Somente os que foram modificados e estÃ£o na stage.

   Instalar:
   npm i -D lint-staged

   Configurar criando arquivo na pasta raiz .lintstagedrc.json e adicionar:
   {
     "*.ts": [
       "eslint 'src/**' --fix",
       "npm run test:staged" (>> adicionar depois de instalar o jest)
     ]
   }

6) husky
   Husky can prevent bad git commit, git push and more ðŸ¶ woof!
   https://www.npmjs.com/package/husky

   Previne que commits ou pushs sejam feitos ao executar comandos de validaÃ§Ã£o do cÃ³digo.

   Instalar:
   npm i -D husky

   Configurar criando arquivo na raiz .huskyrc.json e adicionar:
   {
     "hooks": {
       "pre-commit": "lint-staged"
     }
   }

-------------------------------------------------
7) Jest
   Jest is a delightful JavaScript Testing Framework with a focus on simplicity.
   Teste unitÃ¡rio

   https://www.npmjs.com/package/jest
   https://jestjs.io/

   Instalar:
   npm i -D jest @types/jest ts-jest

   Setup (no shell):
   > sudo npm i -g jest
   > jest --init
     âœ” Would you like to use Jest when running "test" script in "package.json"? â€¦ yes
     âœ” Choose the test environment that will be used for testing â€º node
     âœ” Do you want Jest to add coverage reports? â€¦ yes
     âœ” Automatically clear mock calls and instances between every test? â€¦ no

   Editar arquivo de setup jest.config.js:
   module.exports = {
       collectCoverageFrom: ['<rootDir>/src/**/*.ts'],
       coverageDirectory: 'coverage',
       roots: ['<rootDir>/src'],
       testEnvironment: 'node',
       transform: {
         '.+\\.ts$': 'ts-jest'
       }
   }

   Adicionar entrada em .lintstagedrc.json:
     "npm run test:staged"
   No package.json, adcionar a entrada test:staged:
     "scripts": {
       "test": "jest",
       "test:staged": "jest"
     },

   jest = mocha + chai + instabul
   (roda os testes, faz os asserts, tem o coverage, fÃ¡cil de configurar, boa documentaÃ§Ã£o)

   Testando se o jest estÃ¡ ativo no projeto:
   ------------------------------------------
   1. criar o arquivo em src/controller.spec.ts, com o seguinte conteÃºdo:
      describe('Description', () => {
        it('Test', () => {
          expect(1).toBe(1)
        })
      })
   2. rodar no shell npm test (executa o script definido no package.json)
